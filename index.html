<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The HTML5 IBRO TestURLs</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="asikerin">
</head>

<body>
  
<script>
function DeepLinker(options) {
  if (!options) {
    throw new Error('no options')
  }

  var hasFocus = true;
  var didHide = false;

  // window is blurred when dialogs are shown
  function onBlur() {
    hasFocus = false;
  };

  // document is hidden when native app is shown or browser is backgrounded
  function onVisibilityChange(e) {
    if (e.target.visibilityState === 'hidden') {
      didHide = true;
    }
  };

  // window is focused when dialogs are hidden, or browser comes into view
  function onFocus() {
    if (didHide) {
      if (options.onReturn) {
        options.onReturn();
      }

      didHide = false; // reset
    } else {
      // ignore duplicate focus event when returning from native app on
      // iOS Safari 13.3+
      if (!hasFocus && options.onFallback) {
        // wait for app switch transition to fully complete - only then is
        // 'visibilitychange' fired
        setTimeout(function() {
          // if browser was not hidden, the deep link failed
          if (!didHide) {
            options.onFallback();
          }
        }, 1000);
      }
    }

    hasFocus = true;
  };

  // add/remove event listeners
  // `mode` can be "add" or "remove"
  function bindEvents(mode) {
    [
      [window, 'blur', onBlur],
      [document, 'visibilitychange', onVisibilityChange],
      [window, 'focus', onFocus],
    ].forEach(function(conf) {
      conf[0][mode + 'EventListener'](conf[1], conf[2]);
    });
  }

  // add event listeners
  bindEvents('add');

  // expose public API
  this.destroy = bindEvents.bind(null, 'remove');
  this.openURL = function(url) {
    // it can take a while for the dialog to appear
    var dialogTimeout = 500;

    setTimeout(function() {
      if (hasFocus && options.onIgnored) {
        options.onIgnored();
      }
    }, dialogTimeout);

    window.location = url;
  };
}

    function checkUrlScheme() {
var url = 'yandexbrowser-open-url://App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING';
var badURL = 'https://yandex.ru';

var linker = new DeepLinker({
  onIgnored: function() {
    alert('browser failed to respond to the deep link');
  },
  onFallback: function() {
    alert('dialog hidden or user returned to tab');
  },
  onReturn: function() {
    alert('user returned to the page from the native app');
  },
});

linker.openURL(url);      

 }    
  </script>
  
 <ul>
   <li><a href="yandexbrowser-open-url://App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING">iBro Search Engine Setting</a></li>
   <li><a href="yandexbrowser-open-url://App-prefs%3ASAFARI%26path%3DDEFAULT_BROWSER_APP">iBro Search Engine Setting defualt bro</a></li>   
   <li><a href="yandexbrowser-open-url://App-prefs%3AGeneral%26path%3DAbout">iBRo General->About</a></li>
   <li><a href="yandexbrowser-open-url://App-prefs%3ANOTIFICATIONS_ID%26path%3Dru.yandex.mobile.search.inhouse">InHouse Test</a></li>
   <li><a href="yandexbrowser-open-url://App-prefs%3APrivacy%26path%3DLOCATION">Fuck2 InHouse Test</a></li>  
   <li><a href="yandexbrowser-open-url://App-prefs%3Aru.yandex.mobile.search.inhouse">Fuck3 InHouse Test</a></li>
   <li><a href="yandexbrowser-open-url://App-prefs%3Aru.yandex.mobile.search.inhouse%26path%3DLOCATION">Fuck4 InHouse Test</a></li>   
   <li><a href="yandexbrowser-open-url://App-prefs%3APrivacy%26path%3DLOCATION%2Fru.yandex.mobile.search.inhouse">Fuck5 InHouse Test</a></li>   
   <li><a href="yandexbrowser-open-url://App-prefs%3ADEFAULT_BROWSER_APP">Fuck6 InHouse Test</a></li>
   <li><a href="ya-search-app-open://?uri=App-prefs%3AGeneral%26path%3DAbout">PP General->About</a></li>
   <li><a href="ya-search-app-open://?uri=App-prefs%3ASAFARI%26path%3DSEARCH_ENGINE_SETTING">PP Search Engine</a></li>          
   <li><a href="yandexbrowser-open-url://App-prefs%3Acom.google.chrome.ios">Fuck Chrome InHouse Test</a></li>   
   <li><a href="yandexbrowser-open-url://app-settings%3A%2F%2Fpath%3DDEFAULT_BROWSER_APP">chrome Search Engine Setting defualt bro</a></li>  
   <li><a href="yandexbrowser-open-url://app-settings%3A">Open Bro Settings</a></li>
   <li><a href="yandexbrowser-open-url://app-settings%3Apath%3DLOCATION%2Fru.yandex.mobile.search.inhouse">Fuck5 Chrome InHouse Test</a></li>
   <li><a id="myLink" onclick="checkUrlScheme();">test15</a></li>  
  </ul>
</body>
</html>
